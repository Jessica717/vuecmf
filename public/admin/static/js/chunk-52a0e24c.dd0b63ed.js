(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-52a0e24c"],{"9b82":function(e,t,o){"use strict";o.r(t);var s=(o("b0c0"),o("5530")),r=o("50bb"),l=o("6690"),a=o("2f62"),i=o("cb18"),n=(o("be3b"),{name:"list",components:{"vuecmf-table":r.a,"tree-modal":i.a},data:function(){return{formTabs:[],roleTree:[],roleColumns:[],currentUser:"",roleDlg:!1,roleFold:!1,is_role_loaded:!1,height:300,width:800,serverUrl:"",serverAxios:axios,editorConfig:{UEDITOR_HOME_URL:"NEditor/",autoHeightEnabled:!1,initialFrameHeight:300,initialFrameWidth:"100%",enableAutoSave:!1}}},computed:Object(s.a)({},Object(a.c)({side_collapse:function(e){return e.side_collapse}})),watch:{side_collapse:function(e){l.c(this,e)}},created:function(){this.serverUrl=this.$api.getUrl(this.$route.meta.model,this.$route.meta.permission.list)},mounted:function(){this.$cookie.get("token");this.title=this.$route.name,l.c(this,this.side_collapse)},methods:{saveRole:function(){var e=this,t=e.$refs.roleTreeTable.$refs.treeModal.getCheckedProp("name");e.$api.request(e.$route.meta.model,e.$route.meta.permission.set_role,"post",{current_user:e.currentUser,role_list:t}).then((function(t){0==t.code?(e.$Message.success(t.msg),e.roleDlg=!1):e.$Message.error(t.msg)}))},assignRole:function(e){var t=this;t.is_role_loaded=!1,t.currentUser=e.row.username,t.roleColumns=[{key:"name",title:"角色名称",width:"300"}],t.roleDlg=!0,t.$api.request("auth_item_model","get_auth_item_list","post",{current_user:t.currentUser}).then((function(e){0==e.code?(t.roleTree=e.data,t.is_role_loaded=!0):t.$Message.error(e.msg)}))},save:function(e){var t=this;void 0===t.$route.meta.permission.save?t.$Message.error("对不起！您没有此保存数据权限。"):t.$api.request(t.$route.meta.model,t.$route.meta.permission.save,"post",e).then((function(e){0==e.code?(t.$Message.success(e.msg),t.$refs.vcTable.refresh()):t.$Message.error(e.msg)}))},del:function(e){var t=this;void 0===t.$route.meta.permission.del?t.$Message.error("对不起！您没有此删除权限。"):t.$api.request(t.$route.meta.model,t.$route.meta.permission.del,"post",e).then((function(e){0==e.code?(t.$Message.success(e.msg),t.$refs.vcTable.refresh()):t.$Message.error(e.msg)}))}}}),c=o("2877"),d=Object(c.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("vuecmf-table",{ref:"vcTable",attrs:{server:e.serverUrl,page:"page",limit:20,"show-del-btn":!0,"show-edit-btn":!0,"show-add-btn":!0,"operate-width":240,"form-label-width":100,"editor-config":e.editorConfig,width:e.width,height:e.height,"form-tabs":e.formTabs,"model-width":"80%","model-height":"90%"},on:{"on-add":e.save,"on-edit":e.save,"on-del":e.del},scopedSlots:e._u([{key:"rowAction",fn:function(t){return[o("Button",{attrs:{type:"primary",icon:"ios-create-outline",size:"small"},on:{click:function(o){return e.assignRole(t)}}},[e._v("分配角色")])]}}])}),o("tree-modal",{ref:"roleTreeTable",attrs:{"tree-data":e.roleTree,columns:e.roleColumns,"show-dlg":e.roleDlg,title:"分配（"+e.currentUser+"）角色","is-loaded":e.is_role_loaded,"is-fold":e.roleFold},on:{"on-ok":e.saveRole,"on-cancel":function(t){e.roleDlg=!1}}})],1)}),[],!1,null,null,null);t.default=d.exports},cb18:function(e,t,o){"use strict";var s=o("a026"),r=o("ee1a"),l=o.n(r);s.default.use(l.a);var a={name:"tree_modal",props:["showDlg","title","isLoaded","treeData","columns","isFold","refTreeName"],data:function(){return{isTreeFold:!0}},mounted:function(){this.isTreeFold=this.isFold},methods:{ok:function(){this.$emit("on-ok")},cancel:function(){this.$emit("on-cancel")}}},i=o("2877"),n=Object(i.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{attrs:{styles:{top:"20px",height:"90%"},title:e.title,"mask-closable":!1,closable:!1},model:{value:e.showDlg,callback:function(t){e.showDlg=t},expression:"showDlg"}},[0==e.isLoaded?[o("Spin",{attrs:{fix:""}},[o("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"24"}}),o("div",[e._v("Loading")])],1)]:[o("tree-table",{ref:"treeModal",attrs:{data:e.treeData,columns:e.columns,stripe:!0,"tree-type":!0,"is-fold":e.isTreeFold,"expand-type":!1,selectable:!0}})],o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Row",[o("Col",{staticStyle:{"text-align":"left"},attrs:{span:"12"}},[o("i-switch",{attrs:{size:"large","true-value":!0,"false-value":!1},model:{value:e.isTreeFold,callback:function(t){e.isTreeFold=t},expression:"isTreeFold"}},[o("span",{attrs:{slot:"open"},slot:"open"},[e._v("折叠")]),o("span",{attrs:{slot:"close"},slot:"close"},[e._v("展开")])])],1),o("Col",{attrs:{span:"12"}},[o("Button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),o("Button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("保存")])],1)],1)],1)],2)}),[],!1,null,"c5072b70",null);t.a=n.exports}}]);
//# sourceMappingURL=chunk-52a0e24c.dd0b63ed.js.map